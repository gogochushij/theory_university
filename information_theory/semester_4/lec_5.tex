\lecture{5}{29 April}{\dag}
\chapter{Коммуникационная сложность}
Пусть у нас есть два игрока: Алиса и Боб. Они могут отправлять друг другу сообщения и хотят посчитать функцию (или отношение) $ f \colon X \times Y \to \O$.

\section{Модели}

\subsection{Детерминированная модель}

Формализуем это в виде бинарного дерева. %картинка

В вершинах будем записывать ходящего игрока, в листьях результаты вычислений.

Левое ребро обозначает сообщение $ 0$, а правое  --- $ 1$. % Лучше взять с практики 
\begin{name}
	$ D(f)$ --- минимальная глубина дерева.
\end{name}

\subsection{Вероятностная модель}
Теперь Алиса и Боб могут подбрасывать монетки. Либо эти монетки (оракулы) публичны (оба видят значения), либо приватными (тогда никто не видит, кроме пользователя).

Так как Алиса или Боб в случае публичного оракула, они могут закрыть глаза на сообщения другого, поэтому публичный протокол не меньше приватного.

Скажем, что \selectedFont{протокол отработал корректно}, если 
\[
	\forall x, y \colon Pr_{r}[\pi(x, y) = f(x, y)] \ge \frac{2}{3}, \quad \pi(x, y) \text{ --- результат работы}
.\] 
% Здесь $ r$ --- для разных случаев
\begin{name}
	$ R^{pub}_{\frac{2}{3}}$ --- аналогично оптимальная высота.
\end{name}

\section{Нижние оценки для детерминированного случая}
% картинка
Пусть наша функция $ f\colon X \times Y \to  \mathbb{O}$. Запишем  для нее коммуникационную матрицу $ M$ размера $ \lvert X \rvert \times \lvert Y \rvert $, где $ M_{x, y} = f(x, y)$.

Рассмотрим $ R_v \subseteq X \times Y\colon  (x, y) \in R_v \Longleftrightarrow \text{протокол приводит в }  v$.

\begin{lm}
	$ R_v = X_v \times Y_v$ --- прямоугольник.
\end{lm}
\begin{proof}
	Пусть $ (x, y)$ и  $ (x', y')$ принадлежат  $ R_v$. Тогда  $ (x, y')$ и  $ (x', y)$ тоже принадлежат  $ R_v$, так как $ a(x) = a(x')$ и  $ b(y) = b(y')$.

	А из этого следует, что это комбинаторный прямоугольник.
\end{proof}
\begin{proof}
    Посмотрим на картинку. Пусть Алиса перешла по какому-то ребру. Вся таблица разделилась на две части.

\begin{figure}[ht]
    \centering
    \incfig{table-proof}
    \label{fig:table-proof}
\end{figure}
И так далее.
\end{proof}

В прямоугольнике для листа у всех элементов одинаковый ответ. То есть исходную матрицу можно разбить на комбинаторные прямоугольники, причем они естественно не пересекаются.

Хотим показать оценку на количество таких прямоугольников.

\section{Метод ранга}
Разбирался на практике:
\[
	\operatorname{rk}_{\R} (M_f) \le \# \text{ одноцветных прямоугольников в разбиении}
.\] 
Здесь $ f$ --- функция.

Для функции $ \operatorname{EQ} = \colon \{0, 1\}^{n} \times \{0, 1\}^{n} \to \{0, 1\}$, будет диагональная матрица. Поэтому одноцветных прямоугольников будет не меньше $ 2^{n}$, а тогда коммуникационная сложность хотя бы $ n$.

\section{Fooling Set}
Рассмотрим коммуникационную матрицу. Пусть мы хотим выбрать некоторое множество 
\[
	S = \{(x_1, y_1), (x_2, y_2) , \ldots \}
,\] 
такое что каждая пара точек не лежит в одном прямоугольнике.

% картинка!!!

Если две клетки в одном прямоугольнике, оставшиеся вершины тоже лежат в нем.

Тогда нужно для всех $ i, j, i \ne j$ либо $ (x_i, y_j)$, либо  $ (x_j, y_i)$ покрашена в другой цвет.

Для $ \operatorname{EQ}$ легко получить ту же оценку. Плюс, как как нужен хотя бы один лист для нуля, $ n$ не хватит, следовательно,  $ D(\operatorname{EQ}) = n+1$.

\begin{thm}
	Если существует Fooling set размера $ s$, то $ \operatorname{rk}_R s \ge s$.
\end{thm}

\subsection{Пример, не соответствующий никакому протоколу}
\begin{figure}[ht]
    \centering
    \incfig{bad-rect}
    \caption{bad recd}
    \label{fig:bad-rect}
\end{figure}
Пусть $ \chi$ --- минимальное число одноцветных прямоугольников в разбиении.
\begin{thm}[GPW, 16]
	Существует $ f$ для которой
	 \[
		 D(f) \ge \log^{2 - \varepsilon } \chi (M_f)
	.\] 
\end{thm}
\begin{proof}
    Без доказательства
\end{proof}
 

\section{Связь со схемами}
\begin{thm}[Шеннон]
	Существует $ f \colon \{0, 1\}^{n} \to  \{0, 1\}$, такая что $ L(f) \ge \Omega\left( \tfrac{2^{n}}{n} \right) $, где $ L$ --- оптимальный размер схемы.
\end{thm}
\begin{proof}
    Всего функций такого вида $ 2^{2^{n}}$, так как можно задать таблицей истинности.

	Посчитаем число схем. Это ациклический граф и то, что записано в его узлах.

	Пусть каждая вершина ($ S$ штук) выбирает себе двух предков. Так же в каждую вершину нужно что-то записать и на ребре можно ставить отрицание: хватит $ 3$ бит. Еще есть входные данные ($ n$ штук).

	Итого: $2^{ S \cdot 2 (\log S + \log n) + 3S}$.

	Схем должно быть не меньше  количества функций
	\[
		2^{S \cdot  2( \log S + \log n) + 2 S} \ge  2^{2^n}
	.\] 
	Отсюда получаем нужное неравенство.
\end{proof}

\textbf{Открытый вопрос:} Можно ли предъявить $ f \in \NP$, что $ L(f) \ge  10n$

\section{$\KW_f$}

Пусть нам дана $ f\colon \{0, 1\}^{n } \to  \{0, 1\}$.

Алиса получает число $ x \in f^{-1}(1)$, а Боб $ y \in f^{-1}(0)$. Его цель % ДОписать!

\begin{thm}[Rarchmer-Wigderson, 1990]
	$ L(f) $ --- размер минимальной формулы для  $ f$, согда $ L(f)$ --- размер минимального протокола для  $ RW_f$
\end{thm}
\begin{proof}
    $ $
    \begin{description}
		\item [\boxed{ 1 \Longrightarrow 2}] Нарисуем дерево вверх корнем. Также спустим все отрицания к листьям. Пусть в узле считается функция $ f = g \vee h$, где  $ g$ и  $h$ --- соседи  $ f$.

			Тогда $ f(x) = 1$,  $ f(y) = 0$ и $ f(y) = 0$. Пусть Алиса посылает информацию, где $ 1$, то есть куда нам нужно спуститься. Далее Боб делает аналогично.% Нормально написать
		\item [\boxed{ 2 \Longrightarrow 1}] 
			Пусть у нас есть некоторый протокол для игры. Это некоторое дерево. Обозначим за $ R_v \coloneqq X_v \times Y_v$ --- прямоугольник входов для вершины $ v$, из которых мы получаем $ v$.

			Мы хотим построить $ f\colon \{0, 1\}^{n} \to \{0, 1\}$.

			Будем подниматься снизу и строить формулу по протоколу. Обозначим за $ f_v$ построенную формулу в вершине  $ v$. Хотим получить следующие свойства для формулы: $ f_v(X_v) = 1$ и  $ f_v(Y_v) = 0$.

			Если они выполняются, то $ \forall x \in X_v \colon f(x) = 1$ и $ \forall y \in Y_v \colon f(y) = 0$.

			В корне $ f = f_r$.

			\begin{itemize}
				\item Если мы в листе $ l$. Здесь написан некоторый ответ. То есть $ \forall x \in X_l ~\forall y \in Y_l \colon x_i \ne  y_i$.

					Тогда либо $ \forall i \colon x_i = 0 \wedge  y_i  = 1$, либо наоборот. % Пояснение?

					В качестве $ f_{l}(z) $ можем в первом случае взять $ \neg z_i$, во втором $z_i$.
				\item Теперь мы находимся в вершине $ v$ с потомками  $ a $ и $ b$.

					Если ходит Алиса, то прямоугольник  $ R_v$ разрезается на   $ R_a$ и  $ R_b$ горизонтально (если  Боб, то наоборот вертикально).

					У нас уже есть две функции  $ f_a$ и  $ f_b$, построенные по предположению индукции.  $ \forall y \in Y_v\colon  f_a(y) = f_b(y) = 0$, так как $ Y_v = Y_a = Y_b$.

					А так как $ X_v \subseteq X_a \cup X_b$, $ \forall x \in X_v$ либо $ f_a(x) = 1$, либо  $ f_b(x) = 1$.

					Поэтому нам подходит  $ f_v \coloneqq f_a \vee f_b$.

					Если же ходит Боб нужно будет сделать конъюнкцию.
			\end{itemize}
    \end{description} 
\end{proof}
