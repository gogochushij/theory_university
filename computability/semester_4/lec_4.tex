\lecture{4}{4 march}{\dag}

\subsection{Главные универсальные функции}
\begin{defn}[]
	Пусть $ U^{(n+1)} \in \F^{n+1}$ универсальная нумерация для функций $ \F^{n}$. 

	\noindent
	$U$ называется \selectedFont{главной нумерацией} или \selectedFont{главной универсальной функцией}, если \\ для любой нумерации $V \in \F^{n+1}$  существует \selectedFont{транслятор} $ s \in \F_{*}$\footnote{по номеру сечения $ V$ находит какой-то номер такого же сечения $ U$}, такой что 
	\[
		\forall m \in \N,~ \overline{x} \in \N^{n} \colon \quad V(m, \overline{x}) = U(s(m), \overline{x}) 
	.\] 
\end{defn}


\begin{thm}
	Существует главная универсальная функция $ U^{(n)} \in \F^{n+1} $ для класса $ \F^{n}$.
\end{thm}
\begin{proof}
	По \hyperref[cor:3]{следствию \ref{cor:3}} существует $ T \in \F^{n+2}$, универсальная для $ \F^{(n+1)}$. Построим $ U$:
	\begin{itemize}
		\item Определим $ U(x, \overline{y}) \coloneqq T(l(x), r(x), \overline{y})$.

		Здесь, как обычно, $ c$ --- канторовская нумерация, $ l, r$ --- левая и правая обратные функции. 
	\item Докажем, что $ U$ главная. Пусть $ V \in \F^{n+1}$ --- некоторая функция.
		Так как $ T$ универсальная для содержащего $ V$ класса, существует $ m$ (номер функции $ V$ среди сечений $ T$), такой что
			\[
				\forall x,~ \overline{y}\colon \quad V(x, \overline{y}) = T(m, x, \overline{y})
			.\] 
			Проверим, что транслятор $ s(x) = c(m, x)$ подойдет, то есть $ V(x, \overline{y}) = U(s(x), \overline{y})$.
			\begin{align*}
				&U(s(x), \overline{y})  &&= \tag{По определению $ U$} \\
				&= T(l(s(x)), r(s(x)), \overline{y}) &&= T(l(c(m, x)), r(c(m, x)), \overline{y}) = \\
				&= T(m, x, \overline{y}) && = V(x, \overline{y})
			\end{align*}
			Значит, $ U$ главная.
	\end{itemize}
\end{proof}

\noindent 
Второе доказательство:
\begin{proof}
	Аналогично мы строили универсальную функцию выше (\hyperref[thm:two-args]{теорема \ref{thm:two-args}} и \hyperref[cor:3]{следствие \ref{cor:3}}). Она и будет главной.\footnote{Здесь можно было бы и  расписать подробно.}
\end{proof}


\begin{thm}[О вычислимости номера композиции]
    Пусть $ U \in \F^2 $ --- главная универсальная функция для $ F$ тогда и только тогда, когда существует $ f \in \F^2_{*}$, такая что
	\[
		U_p \circ U_q = U_{f(p, q)}
	.\] 
	То есть $ \forall p, q, x \in \N \colon \quad U(p, U(q, x)) = U(f(p, q), x)$.
\end{thm}

\begin{proof}
    ~\begin{description}
		\item[\boxed{ 1 \Longrightarrow 2}] 
			Пусть $ U$ --- главная.

			Рассмотрим $ V(n, x) = U(l(n), U(r(n), x))$, то есть  $ V(c(p, q), x) = U(p, U(q, x))$. 

			Фактически $ V$ --- это $ U_q \circ U_p$.
			Так как $ U$ --- главная универсальная, 
			\[
				\exists s \in \F_{*} \colon \quad V(n, x) = U(s(n), x)
			.\] 
			Тогда
			\begin{align*}
				U_p \circ U_q &= U(p, U(q, x)) = V(c(p, q), x) = \\
							  &= U(s(c(p, q)), x) = U_{s(c(p,\: q))} (x) \tag{По определению транслятора}  
			\end{align*}
			Теперь обозначим $ f(p, q) = s(c(p, q))$ и получим нужное равенство.
		\item [\boxed{ 2 \Longrightarrow 1}]
			\begin{proof*}
				Пусть есть такая функция $ f(p,~ q)$, что $ U_p \circ U_q = U_{f(p, q)}$. Хотим доказать, что $ U$ главная.
				\begin{itemize}
					\item Найдем транслятор для канторовской нумерации $ t \in \F\colon \forall n, x \in \N \quad U(t(n), x) = c(n, x)$.
						\textit{
						TODO}: дописать
					\item Построим транслятор для любой функции $ V \in \F^2$.
						Пусть $ g(y) = V(l(y), r(y))$. Так как  $ U$ универсальная, есть сечение $ U_a = g$. Подставим  $ c(n, x)$:
						\[
							U_{a}(c(n, x)) = g(c(n, x)) = V_n(x)
						.\] 
						Выразим $ c(n, x)$ через $ U$ с помощью транслятора $ t$:
						\[
						\begin{aligned}
							&U_{a}(U(t(n), x)) &= U_a \circ U_{t(n)}(x) = V_n(x) \\
							&\shortparallel \\
							&U_{f(a, t(n))}(x) &= V_n(x)
						\end{aligned}
					\]
				\end{itemize}
				Тогда $ s(n) = f(a, t(n))$ --- нужный транслятор для  $ V$.
			\end{proof*}
    \end{description} 
\end{proof}

\subsection{Теорема Райса}
\begin{defn}[Свойство функций] \index{Свойство функций}
	\selectedFont{Свойство} $ \mathcal{A}$ функций класса $ \mathcal{C}$ --- подмножество функций, удовлетворяющих этому свойству, то есть лежащих в $ \mathcal{A}$.

	\noindent
	\selectedFont{Нетривиальное свойство} --- не пустое и не совпадающее со всем классом: $ \varnothing \subsetneq \mathcal{A} \subsetneq \mathcal{C}$.
\end{defn}

\begin{thm}[Райса / Успенского]
	Пусть $ \mathcal{A} \subset \F$ --- некоторое нетривиальное свойство вычислимой функции, 
	$ U$ --- главная универсальная функция для всех вычислимых функций класса $ \F$.

	Тогда не существует алгоритма, который по  $ U$-номеру вычислимой функции проверяет $ \mathcal{A}$. 

	То есть множество $ A = \{n \mid U_n \in \mathcal{A}\}$ неразрешимо.
\end{thm}
\begin{proof}
    Покажем, что, если свойство $ \A$ можно алгоритмически проверить, то любые два непересекающихся перечислимых множества можно отделить некоторым разрешимым.

	Пусть $ P$ и $ Q$ --- произвольные непересекающиеся множества. 

	$ \xi$ --- какая-нибудь функция из $ \A$, а $ \eta$ --- какая-нибудь не из $ \A$.

	Рассмотрим следующую функцию:
	\[
		V(n, x) = 
		\begin{cases}
			\xi(x), & x \in P \land x \notin Q \\
			\eta(x), & x \in Q \land x \notin P\\
			\uparrow, & n \notin P \cup Q
		\end{cases}
	\] 

	Заметим, что $ V$ вычислимая, так как можем запустить по шагам алгоритмы для $ P$ и $ Q$, если один из них завершается, то остается вычислить соответствующую функцию, а иначе значение не определено.

	Так как $ V$ вычислима, а $ U$ универсальна, существует транслятор $ s \in \F_{*}$:
	\[
		U(s(n), x) = V(n, x)
	.\] 
	Теперь для любого с помощью проверки  $ V_n(x) \in  \A$ можем отделить $ P$ от $ Q$. Получаем противоречие со \hyperref[cor:separator]{следствием \ref{cor:separator}}.
\end{proof}

\begin{cor}\label{cor:4}
    Множество номеров некоторой заданной функции $ \varphi $ в главной нумерации неразрешимо.

	В частности, в главной нумерации множество МТ, вычисляющих одну функцию, бесконечно много.
\end{cor}

\begin{cor}[Пример универсальной неглавной функции]\label{cor:5}
	Существует универсальная неглавная для класса $ \F^{n}$ функция $ V \in \F^{n+1}$.
    % Можно построить пример универсальной неглавной функции --- нигде не определенная функция имеет единственный номер.
\end{cor}
\begin{proof}
	Пусть $ U(n, x)$ --- произвольная главная универсальная функция для $ \F^{n}$ и $ D$ --- множество номеров функций в нумерации $ U$ с непустой областью определения. 

	\vspace{1em}
	Заметим, что $ D$ перечислимое, так как можно построить следующий алгоритм: 
	на шаге $ k$ будем для $ i \in \{0, 1, \ldots , k-1\}$ и $ \overline{j} \in \{0, 1, \ldots, k-1\}^{n}$
	считать $ U_{i}(\overline{j})$.
	Для этого даем на каждой из $ k^{n+1}$ машин Тьюринга (для $ U_i(\overline{j})$) поработать $ k$ шагов.
	Теперь для всех пар $ (i, \overline{j})$, на которых был выдан результат, выводим $ i$.

	Для любой функции  $ U_i$ с непустой областью определения рано или поздно найдется $ k$, которое больше номера функции и координат какой-то точки из области определения и количество действий для вычисления значения в ней, так как мы, во-первых, мы перебираем все точки, а, во-вторых, постоянно увеличиваем количество шагов.

	И когда мы дойдем до этого $ k$ номер $ i$ будет выведен. Поэтому алгоритм действительно перечисляет номера функций, но, естественно, только с непустой областью определения.
	\vspace{1em}

	Определим функцию $ f(n)$, для  $ n$ равную $ n$-ому элементу $ D$ в порядке возвращения построенным алгоритмом. 

	Можно заметить, что по теореме Райса, $ D$ неразрешимо (свойство <<иметь непустую область определения>> очевидно непустое, и $ D$ --- множество номеров таких функций).

	Поэтому $ D$ бесконечно, следовательно, для всех $ n$ когда-то будет выведен  $ n $-ый элемент $ D$.

	Теперь рассмотрим функцию
	\[
		V(i, \overline{x}) = \begin{cases}
			\uparrow, & i = 0 \\
			U(f(i-1), \overline{x}), & i \ne 0
		\end{cases}
	\] 
	Эта функция вычислима, универсальна. При этом единственный номер <<нигде не определенного сечения>> --- только $ 0$, это множество конечно, следовательно разрешимо. Поэтому $ V$ неглавная по теореме Райса.

	Также любая где-то определенная функция будет получена для какого-то $ V_n$, поэтому  $ V$ универсальна.
\end{proof}
\begin{cor}[Переформулировка прошлого следствия]
	Для любой главной нумерации $ U$ и любой вычислимой функции $ f$  множество $ \{n \mid U_n = f\}$ неразрешимо.
\end{cor}


\section{Теорема о неподвижной точке}

\begin{lm}\label{lm:3}
	Пусть $ \equiv $ --- отношение эквивалентности на $ \N$. 

	\noindent
	Тогда следующие утверждения \textit{\large не} выполняются одновременно:
	\begin{enumerate}
		\item Для любой $ f \in \F $ существует \textit{$ \equiv $-продолжение} $  g \in \F_{*}$\footnote{То есть, если $ f(x) $ определена, то  $ g(x)$ тоже определена и $ g(x) \equiv f(x)$}.
		\item Найдется $  h \in \F_{*}$, не имеющая $ \equiv $-неподвижной точки, то есть 
			$ \forall n \colon  n \not\equiv h\left( n \right) .$
	\end{enumerate} 
\end{lm}
\begin{proof}
	Рассмотрим $ f \in \F$, от которой никакая вычислимая функция не может отличаться всюду, например, $ f(x) = U(x, x)$.

	Пусть выполняются оба пункта.
	\begin{enumerate}
	    \item По первому существует $ \equiv $-продолжение $ f$ функция $ g \in \F_{*}$.
		\item По второму существует такая $ h \in \F_{*}$, что $ \forall n \colon  h(n) \not\equiv n$.
	\end{enumerate} 

	Рассмотрим $ t(x) \coloneqq h(g(x))$ и проверим, что она всюду отличается от $ f$:
	\begin{itemize}
		\item Если $ f$ определена, то $ f(x) \equiv g(  x )  \not\equiv  h(g(x)) = t(x)$ 
		\item Если $ f$ не определена, то $ t$ определена
	\end{itemize}
	Но от $ f$ никакая вычислимая функция не может отличаться всюду.
\end{proof}
\begin{thm}[О неподвижной точке]
	Если $ U$ --- главная универсальная вычислимая функция для класса $ \F$, а $ h \in \F_{*}$, то $ \exists n \colon  U_n = U_{h(n)}$.
\end{thm}
\begin{proof}
    Возьмем в качестве отношения эквивалентности следующее: $ x \equiv x \Longleftrightarrow U_x = U_y $.

	Покажем, что выполняется первый пункт из \hyperref[lm:3]{леммы \ref{lm:3}}.

	Пусть $ f \in \F$. Тогда можем рассмотреть $ V(n, x) \coloneqq U(f(u), x)$. 

	Так как $ U$ главная существует транслятор:
	\[
		\exists s \in \F_{*} \colon  \forall n, x ~V(n, x) = U(s(n), x)
	.\] 

	Проверим, что $ s $ и есть $ \equiv $-продолжение $ f$
	\begin{itemize}
	\item если $ f(n)$ определена, то $ U_{s(n)} = U_{f(n)}$, то есть $ s(n) = f(n)$.
		\item если не определена, то и $ U_{s(n)}$ нигде не определена.
	\end{itemize}

	В итоге первый пункт \hyperref[lm:3]{леммы} выполняется, поэтому второй не выполняется.
\end{proof}
\begin{cor}
	$ U(n, x)$ --- главная универсальная вычислимая функция. Тогда 
	\[
		\exists p \in \N \colon \quad \forall x  ~ U(p, x) = p
	.\] 
\end{cor}
\begin{proof}
	Рассмотрим $ V \in \F^{2}$, такую что $ V(n, x) = n$.
	Тогда существует $ s(n)$, такое что  $ U_{s(n)} = V_n = n$.

	Теперь применим теорему о неподвижной точке к  $ s(n)$ : 
	\[
		\exists p \colon \quad U_p = U_{s(p)} = V_p = p
	.\] 
\end{proof}

\section{$ m$-сводимость}
\begin{defn}[$ m$-сводимость]
	Множество $ A \subset \N$  \selectedFont{$m$-сводится } ($ A \le_{m} B$) к $ B \subset \N$, если существует $ f \in \F_{*}$, такая что
	\[
		\forall x \in \N \colon\quad x \in A \Longleftrightarrow f(x) \in B
	.\] 
\end{defn}

\begin{prop}
	~\begin{itemize}
		\item Если $ A \le _{m} B$ и $ B$ разрешимо, то $ A$ разрешимо.
		\item Если $ A \le _{m} B$ и $ B$ перечислимо, то $ A$ перечислимо.
		\item Отношение $ \le _{m}$ рефлексивно и транзитивно.
		\item Если $ A \le _{m} B$, то $ \N \setminus A \le _{m} \N \setminus B$.
	\end{itemize}
\end{prop}
\begin{proof*}
	\begin{itemize}
		\item Чтобы  проверить $ x \stackrel{?}{\in} A$, проверим $ f(x) \in B$. Так как $ B$ разрешимо, вторая проверка выдаст какой-то ответ и мы можем его вернуть.
		\item Аналогично, если $ f(x) \in B$, то $ x \in A$, а если расходится, то $ x \notin A$.
		\item Для рефлексивности подойдет $ f = \operatorname{id}$, для транзитивности берем композицию. 
		\item Инвертируем результат:
			\[
				x \in \N \setminus A \Longleftrightarrow x \notin A \Longleftrightarrow f(x) \notin B \Longleftrightarrow f(x) \in \N \setminus B
			.\] 
	\end{itemize}
\end{proof*}
\begin{note}
    Разрешимое множество сводится к любому $ B \notin \{\infty, \N\}$
\end{note}
\begin{note}
    К пустому множеству сводится только пустое. к $ \N$ сводится только $ \N$.
\end{note}


\begin{defn}[$ m$-полнота]
	Перечислимое множество $ A$ называется \selectedFont{$ m$-полным} (в классе перечислимых множеств), если любое перечислимое $ B$  $ m$-сводится к $ A$.
\end{defn}

