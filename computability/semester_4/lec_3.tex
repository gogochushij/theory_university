\lecture{3}{25 feb}{\dag}
\section{Перечислимые множества}

\begin{defn}[Пересчислимое подмножество]\index{перечислимое множество}
	Подмножество $ \N^{k}$ называется \selectedFont{перечислимым}, если существует алгоритм, который выводит все его элементы в некотором порядке.
\end{defn}

\begin{thm}[Об эквивалентных определениях]
    Следующие определения эквивалентны определению перечислимого множества
    \begin{enumerate}
	\item область определения вычислимой функции
	\item область значений вычислимой функции
	\item его полухарактеристическая функция вычислима
	\item область значений  всюду определена вычислимой функцией
    \end{enumerate} 
\end{thm}
\begin{proof}
    ~\begin{description}
        \item \boxed{ \text{перечислимость} \Longrightarrow 2} 
	    Чтобы посчитать $ \chi_{X}(n)$, запускаем алгоритм, перечисляющий элементы множества, ждем $ n$.

	    Если вывелось $ n$, то выводим $ \chi_{X}(n) = 1$, а иначе мы зациклились, то есть получили расходимость.
        \item \boxed{ 3 \Longrightarrow 1} 
	    Действительно, множеств $ X$ будет областью определения $ \chi_{X}$, а она вычислима. 
        \item \boxed{ 1 \Longrightarrow \text{перечислимость}} 
	    Пусть область определения вычисляется алгоритмом  $ B$.

	    Построим алгоритм $ A$ следующим образом: будем запускать $ B$ по шагам и выводить элементы множества
	    \begin{itemize}
		\item $ 1$ шаг на входе $ 0$
		\item $ 2$ шага на $ 0$, $ 2$ шага на $ 1$
		\item $ 3$ шага на $ 0, 1, 2$
		 \item и так далее
		 \item как только $ B$ закончил работу на некотором элементе, выводим этот его.
	    \end{itemize}
	    Этот алгоритм $ A$ перечисляет наше множество, так как для алгоритма $ B$ требуется конечное время работы на элементах области определения.
        \item \boxed{ 2 \Longrightarrow \text{перечислимость}} 
			Аналогично, но выводим значение функции на элементе, на котором мы останавливаемся.
        \item \boxed{ 1 \Longrightarrow 2} 
			Пусть $ X$ --- область определения функции, которая вычисляется алгоритмом $ A$.
			Рассмотрим следующую функцию:
			\[
				b(n) = \begin{cases}
					n, & \text{если } A \text{ заканчивает работать на } n \\
					\uparrow , & \text{если } A \text{ зацикливается на } n
				\end{cases}
			\] 
			Теперь $ X$ --- область значений $ b(n)$, а она вычислима.
        \item \boxed{ \text{перечислимость} \Longrightarrow 4} 
			Пусть $ A$ --- алгоритм, перечисляющий $ X$. Рассмотрим любой $ n_0 \in X$.

			Построим функцию $ f$, которая всюду определена и $ X$ --- ее область значений.
			\[
				f(n)
				= \begin{cases}
					t, &\text{если на $ n$-ом шаге работы $ A$ появляется $ t$} \\
					n_0, & \text{если ничего не появляется}
				\end{cases}
			\] 
        \item \boxed{ 4 \Longrightarrow 2} Очевидно 
    \end{description} 
\end{proof}
\begin{note}
    Все области значений и определений не применимы к пустому множеству, которое тоже перечислимое.
\end{note}

\begin{probl}
    В определении перечислимого множества выводить элементы с повторениями. Это эквивалентно определению без повторений. 
\end{probl}

\begin{thm}
    Объединение и пересечение перечислимых множеств тоже перечислимое.
\end{thm}
\begin{proof*}
    Пусть для первого множества есть алгоритм $ A$, который завершается на всех элементах этого множества. Аналогично для второго --- $ B$.

    \begin{itemize}
	\item Хотим проверить, что $ n$ принадлежит объединению. Будем давать алгоритмам  $ A$ и $ B$ поработать по шагу. Ждем шага, на котором завершает работу хотя бы один алгоритм. Значит, $ n$ лежит в одном из множеств. 
	\item Чтобы проверить принадлежность пересечению запустим сначала $ A$, если он завершит работу, то запустим $ B$. Если и $ B$ остановится, $ n $ лежит в обоих множествах.
    \end{itemize}
    В обоих случаях, если элемент не принадлежит объединению или пересечению, получим расходимость.
\end{proof*}


\begin{thm}[Пост]
    $ A$ разрешимо тогда и только тогда, когда $ A$ и $ \overline{A}$ перечислимые.
\end{thm}
\begin{proof}
    ~ \begin{description}
        \item \boxed{ 1 \Longrightarrow 2} 
			Так как $ A $ разрешимо, можем рассмотреть характеристическую функцию $ \chi_{A}(n)$, которая вычислима.

			Построим полухрарактеристические для $ A$ и $ \overline{A}$:
			\begin{itemize}
			\item для $ A$: если $ n \in A$, то $ \chi_{A}' = 1$, иначе $ \chi_{A}'(n)$ расходится
			\item для $ \overline{A}$ аналогично, только результаты инвертированы.
			\end{itemize}
        \item \boxed{ 2 \Longrightarrow 1} 
	    Пусть мы хотим проверить $ n \stackrel{?}{\in} A$.

	    Запускаем одновременно по шагам алгоритмы, перечисляющие $ A$ и $ \overline{A}$, ждем появления $ n$. 
	    Рано или поздно должно появиться, так как в объединении $ A$ и $\overline{A}$ дают все множество. 
	    
	    Если его выдал алгоритм для $ A$, то $ \chi_A(n) = 1$, а если для $\overline{A}$, то $ \chi_A(n) = 0$.
    \end{description} 
\end{proof}


\begin{defn}[Проекция]\index{проекция}
	Подмножество $ P \subseteq \N$ называется \selectedFont{проекцией} $ Q \subseteq \N^2$, если   \[
		\forall x \colon x \in  P \Longleftrightarrow \exists y \colon  (x, y) \in  Q
	.\] 
\end{defn}

\begin{thm}[О проекции]
    Множество $ P$ перечислимое тогда и только тогда, когда $ P$ --- проекция некоторого разрешимого множества $ Q$.
\end{thm}
\begin{proof}
    ~\begin{description}
        \item \boxed{ 1 \Longrightarrow 2} 
			Пусть $ A$ --- алгоритм, перечисляющий $ P$. Тогда подойдет
			\[
				Q \coloneqq \{(n, t) \mid n \text{ появляется в течение } t \text{ шагов работы } A\}
			.\] 
        \item \boxed{ 2 \Longrightarrow 1} 
			Проекция перечислимого перечислима: берем алгоритм, которые перечисляет $ Q$, но оставляем только первую координату.
    \end{description} 
\end{proof}

\begin{thm}[О графике]
    Частичная функция $ f\colon \N \to \N$ вычислима тогда и только тогда, когда перечислим ее график 
	\[
		F \coloneqq  \{(x, y) \mid f(x) \text{ определена и } f(x) = y\}
	.\] 
\end{thm}
\begin{proof*}
    ~ \begin{description}
        \item \boxed{ 1 \Longrightarrow 2} 
	    Чтобы перечислить все все точки графика будем по очереди запускать алгоритм для $ f$ на $ x \in \N$, причем будем давать ему поработать $ i$ шагов на шаге $ i$.
	    
	    Если $ f(x)$ в некоторый момент вычислено, выводим $ (x, f(x))$.
        \item \boxed{ 2 \Longrightarrow 1} 
	    Построим алгоритм вычисляющий $ f$: пусть нам на вход дано $ x$, запустим алгоритм, перечисляющий элементы $ F$, если $ (x, f(x)) \in F$, то есть $ f$ определена в точке $ x$, то в какой-то момент мы выпишем значение.  

	    Если же функция не определена в $ x$, то пары $ (x, f(x))$ в $ F$ нет и мы зацикливаемся.
    \end{description} 
\end{proof*}


\begin{note}
	Различные названия типов множеств в других источниках:
	\begin{center}
	\begin{tabular}{c|c}
		перечислимое & разрешимое \\
		\hline
		полуразрешимое &   \\
		вычислимо перечислимое & вычислимое \\
		полурекурсивное & рекурсивное \\
		\hline
		semi-decidable & decidable \\
		semi-recursive & recursive 
		enumerable &  \\
    \end{tabular}
	\end{center}
\end{note}


\section{Универсальные функции}
Рассмотрим функцию $ U^{(m+1)}(n, \overline{x})$.

Обозначим за $ U_n(\overline{x})$ --- функция от $ m$ аргументов (получается из $ U$ фиксацией первого аргумента).

\begin{defn}[Универсальная функция]\index{универсальная функция}
    $ U(n, \overline{x})$ --- \selectedFont{универсальная для класса $ K$ функция} от $ m$ аргументов, если 
	\begin{itemize}
		\item $ \forall n \colon  U_n(\overline{x}) \in K$
		\item $ \forall f \in K ~ \exists n \colon f = U_{n}$
	\end{itemize}
\end{defn}

\begin{note}
    Универсальная функция существует только для счетных $ K$.
\end{note}
\begin{note}
    Все рассматриваемые функции частичные.
\end{note}


\begin{thm}
    Существует вычислимая функция $ 2^{x}$ аргументов, универсальная для класса вычислимых функций $ 1$-ого аргумента.
\end{thm}
\begin{proof}
	Запишем все коды МТ, вычисляющих функции $ 1$-ого аргумента, в порядке возрастания (сначала по длине, затем в алфавитном).

	Пусть $ U(i, x)$ --- результат работы MT  $ M_i$ на входе $ x$. Сечение $ U_i$ соответствует МТ $ M_i$.
	% написать подробнее 12:20
\end{proof}

\begin{name}
	$ \mathcal{F}^{m}$ --- вычислимые функции от $  m$ аргументов
	$ \mathcal{F}^{m}_{*}$ --- всюду определенные вычислимые функции от $  m$ аргументов
\end{name}

\begin{cor}
    Существует $ U \in  \F^{m+1}$, универсальная для $ \F^{m}$.
\end{cor}
\begin{note}
    Здесь мы будем использовать $ m$-местную канторовскую нумерацию $ c(\overline{x})$. 
    Обозначим проекцию на $ i$ координату за $ c_i$.
    % написать про канторову нумерацию для $ m$ и проекции $ c_i$
\end{note}
\begin{proof}
	Используем канторовскую нумерацию $ m$-ок $ c(\overline{x})$.
	Универсальной функцией для $ 2^{x}$ будет
	\[
		U'(n, \overline{x}) \coloneqq U(n, c(\overline{x}))
	.\] 
	Проверим это. Рассмотрим произвольную функцию $ f(\overline{x}) \in \F^{m}$.

	Определим 
	\[
		g(\overline{x})\coloneqq f(c_1(x), \ldots c_m(x))
	.\] 
	$ g$ вычислима, $ U$ --- универсальна, поэтому 
	\[
		\exists n \colon  U_n(x) = g(x)
	.\] 
	\begin{align*}
		& U'(n, \overline{x}) &&=  \tag{по определению  $U$} \\
		&=U(n, c(\overline{x})) &&= \tag{\text{по определению } g} \\
		&=g(c(\overline{x})) &&= \tag{\text{по определению } g} \\
		&=f(\overline{x}) &&= f(c_1(c(\overline{x})), \ldots c_{m}(c(\overline{x})))
	\end{align*}
	То есть $ U'$ действительно универсальная.
\end{proof}


\begin{thm}
    Не существует $ V \in \F_{*}^{2}$ универсальной для $ F^{*}$.
\end{thm}
\begin{proof}
    Предположим, что такая функция $ U \in  \F_{*}^{2}$ существует.

	Рассмотрим диагональную функцию:
	\[
		d'(n) = U(n, n) + 1 \in \F_{*}
	.\] 
	$d'(n)$ отличается от всех сечений $ U$: если $ \forall x \colon U(n, x) = d'(x)$, подставим $ x= n \colon U(n, n) \ne U(n, n ) + 1$. Противоречие. 
\end{proof}
\begin{note}
    Для класса частичных функций такое рассуждение не проходит, так как они могут быть не определены и прибавление единицы ничего не меняет для неопределенности.
\end{note}

\begin{thm}
	Существует вычислимая частичная функция, не имеющая всюду определенного вычислимого продолжения\footnote{то есть нельзя доопределить до всюду определенной вычислимой}.
\end{thm}
\begin{proof}
	Подходит функция $ d'(n) = U(n, n) + 1$, где $ U$ --- универсальная вычислимая функция\footnote{далее это обозначение по умолчанию определяет универсальную вычислимую частичную функцию $ U^{(m+1)}$ для вычислимых частичных функций $ m$ аргументов}.

	Пусть ее можно доопределить до вычислимой $ d''$:
	\begin{itemize}
		\item при $ n$, где $ d(n, n) $ определена, $ d''$ на один больше
		\item а где не определена, $ d''$ определена.
	\end{itemize}
	Поэтому $ d''$ отличается от всех сечений универсальной функции. Противоречие. 
\end{proof}


Аналогично можно ввести определения для перечислимых множеств
$ W \subset \N^2$
% ДОПИСАТЬ


\subsection{Перечислимое неразрешимое множество}
\begin{thm}
    Существует перечислимое неразрешимое множество.
\end{thm}
\begin{proof}
	Рассмотрим вычислимую $ f(x)$, не имеющую всюду определенного вычислимого продолжения. Ее область определения $ F$ --- перечислимое и неразрешимое.
	\begin{itemize}
		\item $ F$ перечислимое, так как оно является областью определения вычислимой функции
		\item $ F$ не разрешимое: предположим противное,
			рассмотрим 
			 \[
				 g(x) = \begin{cases}
					 f(x), & x \in F \text{ -- вычислимое, всюду определенное} \\
					 0, & x \notin F \text{ -- продолжение } f
				 \end{cases}
			\] 
	\end{itemize}
\begin{note}
	$ F = \{n \mid U(n, n) \text{ определено}\}$ --- переформулировка $ L_1$ (останавливающиеся на своем входе МТ.
\end{note}
\begin{note}
    $ \overline{F}$ --- пример неперечислимого множества.
\end{note}
\begin{note}
    Область определения универсальной функции --- перечислимое, но не разрешмое. 
	так как область определения $ U(n, n)$ --- частично определенная не разрешимая.
\end{note}
\begin{note}
    <<Проблема остановки>> --- останавливается ли МТ $ M$ на входе $ x$ --- переформулировка принадлежности области определения универсальной функции.
\end{note}
\end{proof}


\begin{thm}
    Существует частичная вычислимая функция $ f\colon  \N \to  \{0, 1\}$, не имеющая всюду определенное вычислимое продолжение.
\end{thm}
\begin{proof}
    Определим
	\[
		d'''(n) = \begin{cases}
		1, & U(n, n) = 0 \\
		0, & U(n, n) > 0 \\
		\uparrow, & U(n, n) \uparrow
	\end{cases}
	\] 
	Любое доопределение будет отличаться от $ U(n, n)$
\end{proof}

\begin{cor}
    Существуют перечислимые $ X, Y$, такие что $ X  \cap Y = \varnothing$, не отделимые никаким разрешимым множеством. 
\end{cor}
\begin{proof}
	$ X = \{ n \mid d'''(n) = 0\}$ и  $ Y = \{n \mid d'''(n) =1 \}$
Существует $ C$ разделяющее.
% добавить картинку
\end{proof}

