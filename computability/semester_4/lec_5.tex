\lecture{5}{11 march}{\dag}
\begin{thm}
    Существует $ m$-полное перечислимое множество.
\end{thm}
\begin{proof}
   Рассмотрим универсальное множество $ U \subset \N \times \N$.

	Пусть $ V \subset \N$ --- множество номеров пар из  $ U$:
	 \[
		 c(x, y) \in V  \Longleftrightarrow (x, y) \in U
	.\] 
	Проверим, что это множество подходит.

	Путь $ T$ --- произвольное перечислимое множество. Так как $ U$ универсальное, то
	\[
	\exists n \colon \quad T = U_n
	.\] 
	Тогда
	\[
		x \in T \Longleftrightarrow x \in U_n \Longleftrightarrow (n, x) \in U \Longleftrightarrow  c(n, x) \in V
	.\] 
	То есть $ f(x) = c(n, x)$ сводит $ T $ к $ V$.
\end{proof}


\begin{note}
    Если $ K$ --- $ m$-полное,  $ K \le _{m} A$ --- перечислимое, то $ A$ тоже $ m$-полное. 
\end{note}


\begin{thm}
	$ U \subset \N \times \N$ --- главное универсальное перечислимое множество. Тогда его диагональ $ D = \{x \mid (x, x) \in  U\}$ будет $ m$-полной.
\end{thm}
\begin{proof}
    Во-первых, $ D$ перечислимое. Далее предположим, что $ K$ --- произвольное перечислимое множество. Тогда $ V = K \times \N$  перечислимо.
	\[
	V_n = \begin{cases}
		\varnothing, & n \notin K \\
		\N , & n \in K
	\end{cases}
	\] 
	Так как $ U$ главная 
	$$ \exists s \in \F_{*}\colon V_n=U_{s(n)} = \begin{cases}
		\N, &n \in K \\
		\varnothing, & n \notin K
	\end{cases}
	$$
	Тогда 
	\[
		n \in K \Longleftrightarrow s(n) \in U_{s(n)} \Longleftrightarrow s(n) \in D
	.\] 
	То есть $ s(n)$ сводит  $ K $ к $ D$.
\end{proof}

\begin{defn}
    Зафиксируем некоторое главное универсальное перечислимое множество $ W$ (число $ n$ будет номером множества $W_n$).
	Будем говорить, что множество $ A$ является \selectedFont{эффективно неперечислимым}, если существует такая всюду определенная вычислимая функция $ f$, что $ f(z) \in A ~\Delta ~W_z$\footnote{Здесь $ \Delta$ означает симметрическую разность; другими словами, $ f(z)$ является точкой, где $ A$ отличается от $ W_z$}.
\end{defn}

\begin{st}
	Существуют перечислимые неразрешимые множества, которые не являются $ m$-полными в классе перечислимых.
\end{st}
\begin{proof*}
    Пока без доказательства, возможно будет в будущем на лекции.
\end{proof*}


\section{Проблема соответствия Поста (PCP)}
Это одна из самых известных неразрешимых задач.

Даны два конечных списка строк одинаковой мощности над алфавитом $ A$ :
\[
\begin{aligned}
	L_1 :& ~w_1, \ldots w_k & x_i, w_i \in A^{*} \\
	L_2: & ~x_1, \ldots x_k & \lvert L_1 \rvert = \lvert L_2 \rvert  
\end{aligned}
\]
Хотим проверить, существуют ли конечные последовательности $  i_1, \ldots i_m \in \{1, \ldots , k\}^+$, такие что $ w_{i_1}\ldots w_{i_m} = x_{i_1}\ldots x_{i_m}$.


\begin{ex}
    Пусть $  L_1 = a^2, b^2, ab ^2$, $  L_2 = a^2b, ba, b$. Решением будет $ 1213$:
	 \[
	w_1 w_2 w_1 w_3 = aabbaaabb = x_1x_2x_1x_3
	.\] 
\end{ex}
\begin{ex}
    Теперь возьмем  $  L_1 = a^2b, a$, $  L_2 = a^2, ba^2$. Несложный перебор приводит к тому, что решений нет.
\end{ex}

\paragraph{Переформулировки}
\begin{itemize}
	\item Через гомоморфизмы. Даны два гомоморфизма $ h_1, h_2\colon \Delta^{*} \to A^{*}$. Проверяем, есть ли строка $ u \in \Delta^{*}\colon h_1(u) = h_2(u)$ 
	\item Через доминошки. Есть $ k$ типов доминошек $ (w_i, x_i)$, каждого типа бесконечно много. Проверяем, можно ли составить последовательно доминошки, чтобы строка сверху совпала со строкой снизу.
\end{itemize}


\begin{thm}[Пост, 1946]
    Проблема соответствия Поста неразрешима.
\end{thm}
\begin{proof}
    Сведем задачу об остановке односторонней одноленточной МТ к PCP. Отметим начало ленты символом $ \triangleright$, \textvisiblespace --- вместо  $ \varepsilon $. Начальное состояние $  q_0$ не входит в правые части команд. Также договоримся, что изначально головка МТ указывает на первый символ строки.

	По МТ $ M = (Q, \Sigma, \Gamma, \delta , q_0, q_{term})$ построим пример для задачи Поста.
	Считаем, что в конце $ M$ стирает все.

	Хотим записать историю вычисления МТ.

	Пусть $ A = \{\triangleright, \#\} \cup \Gamma \cup  Q$, $ \#$ --- для разделения конфигураций.

	\begin{enumerate}
		\item Начальные доминошки $ ( \varepsilon , \triangleright q_0 x \#)$ , $ x \in \Sigma \cup \{\text{\textvisiblespace}\}$
		\item Доминошки копирования $ (c, c)$, $ c \in A $ 
		\item  Для всех правил $ (q, c) \to  (q', c', +1)$ : $(qc, c'q')$, если $ c = \text{\textvisiblespace}$, добавляем еще доминошку $ (q\# , c'q'\#)$.
		\item Для всех правил $ (q, c) \to  (q', c', -1)$: $ (aqc, q'ac')$ , если $ c = \text{\textvisiblespace}$, добавляем $ (aq\#, q'ac'\#)$ 
		\item Конец строки, для всех $ c \in A \setminus \triangleright$, три доминошки
			$ (cq_{term}, q_{term}), (q_{term}c, q_{term}), (\triangleright q_{term}q_{term}, q_{term})$
	\end{enumerate} 
	\begin{note}
	    Доминошки копирования дают решение задачи Поста, далее это поправим, а пока считаем, что начинаем с доминошки типа $ 1$.
	\end{note}
	\begin{description}
		\item[Шаг 1] Сверху пусто, снизу начальная конфигурация.
		\item[Шаг 2] Обязательно доминошка $ (\triangleright, \triangleright)$ 
		\item[Шаг $ i$] Сверху $ i-1$ конфигурация MT, снизу  $ i$-ая.
			Доминошка копирования, доминошка команды, доминошка копирования
	\end{description}
	Если МТ не останавливается, то последовательность доминошек не совпадет.

	Если МТ останавливается, то достаточно добавить доминошку  $ 5$ в конец.

	Добьемся того, чтобы нельзя было начинать с доминошки копирования. 
	Например, можно сделать две копии алфавита $ A$ и $ A'$,
	дальше раздвоить каждую доминошку: $ (\text{сверху }A, \text{снизу }A'), (A', A)$.
	Теперь на первое место можно поставить лишь доминошку типа 1, 
	ведь у остальных снизу и сверху первый символ из разных алфавитов, а значит точно не совпадает.
\end{proof}


\begin{cor}
    Задача о пустом пересечении $ 2$-х грамматик алгоритмически неразрешима.
\end{cor}
\begin{proof}
	Пусть разрешима. Тогда  PCP разрешима следующим образом:
	\[
	\begin{aligned}
		Gr_1 \colon& S \to  x_i S w_i^R / \# & \forall i \in \{1, \ldots k\} \\
		Gr_2 \colon& S \to  a S a / a\#a & \forall a \in A
	\end{aligned}
	\]
	То есть $ Gr_1$ --- строка вида $  x_{i_1} \ldots x_{i_n} \# (w_{i_1}\ldots w_{i_{n}})^{R}$, а  $ Gr_2$ --- $ v\#v ^{R}$, где $ v \in A^{+}$
	\[
		L(Gr_1) \cap L(Gr_2) \ne  \varnothing \Longleftrightarrow \text{PCP имеет решение}
	.\] 
\end{proof}

\begin{note}
    PCP неразрешима даже для бинарного алфавита, так как можем взять инъективное кодирование бинарными словами.
\end{note}
\begin{note}
	Можно доказать, что PCP неразрешима для списков длины $ k = 5$ (без доказательства)
\end{note}
\begin{note}
    Для $k= 2$ разрешима, для $ k \in \{3, 4\}$ неизвестно.
\end{note}

\section{$T$-сводимость (по Тьюрингу)}
\begin{defn}[Сводимость по Тьюрингу] \index{сводимость по Тьюрингу}
	Пусть $ A, B \subset \N$. Тогда $ B$ \selectedFont{сводится по Тьюрингу} к $ A$ ($ B \le _{T}  A)$, если существует алгоритм с оракулом $ A$, отвечающим на вопрос о принадлежности  $ n $ множеству $ B$.
\end{defn}


\begin{prop}
	~\begin{itemize}
		\item $ B \le _{m} A \Longrightarrow B \le _T A$
		\item $ \forall A\colon  A \le _{T} \N \setminus A $
		\item сводимость по Тьюрингу транзитивна и рефлексивна
		\item $ A \le _{T} B $ и $ B$ разрешимо, то $ A$ тоже разрешимо
    \end{itemize}
\end{prop}
\begin{proof*}
    ~\begin{itemize}
        \item Хотим научиться проверять принадлежность $n \in B$. По $m-$сходимости верно, что $f \in \mathcal{F}_{*}: x \in B \Leftrightarrow f(x) \in A$. Тогда оракул $A$ подойдет, поскольку достаточно спросить принадлежность $f(n)$ к $A$.
        \item Очевидно, чтобы проверить принадлежность $n$ к $A$, имея оракул $\N \setminus A$, достаточно инвертировать ответ оракула.
        \item Рефлексивность очевидна. Покажем, что $A \le_{T} B, B \le_{T} C \Rightarrow A \le_{T} C$. Нужно построить алгоритм, который с оракулом $C$ умеет определять $x \in A$. У нас есть алгоритмы $A_B$ и $B_C$. Пусть надо проверить, что $x \in A$. Думаем, что алгоритм $B_C$ и есть оракул $B$. Тогда запускаем алгоритм $A_B$ и вместо оракула пользуемся алгоритмом $B_C$. Итого справились с оракулом $C$.
        \item Просто не пользуемся оракулом $B$, а вместо него используем алгоритм для проверки принадлежности $B$, ведь $B$ разрешим. 
    \end{itemize}
\end{proof*}
\begin{note}
	Если $ A$ перечислимо, $ B \le _{T} A$, то $ B$ может быть неперечислимым.
\end{note}
\begin{proof*}  
 В \hyperref[thm:existing_set]{теореме \ref{thm:existing_set}} про существование перечислимого неразрешимого множества мы привели в качестве примера множество $F$ --- область определения $U(n,n) + 1$. Тогда возьмем $A = F, B = \overline{F}$. По второму свойству есть Тьюринг сводимость. 
\end{proof*}


\begin{defn}[Функция с оракулом]
	Аналогично можно определить вычисления с оракулом $ f$ (это всюду определенная функция).
	Функция вычисляется алгоритмом, который в любой момент может обратиться к оракулу ---  попросить оракула вычислить $ f(n)$.
\end{defn}
